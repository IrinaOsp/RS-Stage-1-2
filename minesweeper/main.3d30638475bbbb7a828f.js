!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},809:function(e,t,n){e.exports=n.p+"assets/favicon-32x32.png"}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var l=o.length-1;l>-1&&!e;)e=o[l--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href;var o={};!function(){n.d(o,{mM:function(){return k},fs:function(){return B},XL:function(){return R},Vk:function(){return q},EP:function(){return M}});var e=n(91),t=n.n(e),l=new URL(n(809),n.b);t()(l);let a,s=0,c=0;function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a=setInterval((()=>{t++,60===t&&(e++,t=0),0===e&&(document.querySelector(".minutes").textContent="00"),document.querySelector(".minutes").textContent=e<10?"0"+e:e;let n=document.querySelector(".minutes").textContent;document.querySelector(".minutes").textContent=n.slice(n.length-2,n.length),document.querySelector(".seconds").textContent=t<10?"0"+t:t}),1e3)}function r(){clearInterval(a),a=null,s=0,c=0,document.querySelector(".minutes").textContent="00",document.querySelector(".seconds").textContent="00"}const u=document.createElement("canvas"),m=document.createElement("div"),d=document.createElement("div"),p=document.createElement("button"),h=document.createElement("p");function C(e,t){M[t][e].isOpen||M[t][e].hasFlag||(L.call(k,e,t),S.call(k,e,t))}const b="#EDEEF1",E="#768591";function S(e,t){document.querySelector("canvas").getContext("2d");const n=M[t][e];n.hasBomb||(L.call(k,e,t),0===n.bombCount&&(0===t?0===e?(C(e+1,t),C(e+1,t+1),C(e,t+1)):e<this.COLS-1?(C(e-1,t),C(e+1,t),C(e-1,t+1),C(e,t+1),C(e+1,t+1)):e===this.COLS-1&&(C(e-1,t),C(e-1,t+1),C(e,t+1)):t===this.ROWS-1?0===e?(C(e+1,t),C(e,t-1),C(e+1,t-1)):e<this.COLS-1?(C(e-1,t),C(e+1,t),C(e-1,t-1),C(e,t-1),C(e+1,t-1)):e===this.COLS-1&&(C(e-1,t),C(e-1,t-1),C(e,t-1)):0===e?(C(e,t-1),C(e+1,t-1),C(e+1,t),C(e,t+1),C(e+1,t+1)):e===this.COLS-1?(C(e-1,t-1),C(e,t-1),C(e-1,t),C(e-1,t+1),C(e,t+1)):(C(e-1,t-1),C(e,t-1),C(e+1,t-1),C(e-1,t),C(e+1,t),C(e-1,t+1),C(e,t+1),C(e+1,t+1))))}function L(e,t){const n=document.querySelector("canvas").getContext("2d");if(!M[t][e].hasFlag&&(M[t][e].isOpen=!0,n.fillStyle=(e+t)%2==0?b:E,n.fillRect(e*this.CELL_SIZE,t*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE),M[t][e].bombCount>0)){switch(M[t][e].bombCount){case 1:n.fillStyle="#3A5FE5";break;case 2:n.fillStyle="#073E1E";break;case 3:default:n.fillStyle="#f00";break;case 4:n.fillStyle="#1E193C";break;case 5:n.fillStyle="#964B00";break;case 6:n.fillStyle="#0d98ba";break;case 7:n.fillStyle="#000";break;case 8:n.fillStyle="#fff"}this.CELL_SIZE<25?(n.font="bold 14px serif",n.fillText(`${M[t][e].bombCount}`,e*this.CELL_SIZE+this.CELL_SIZE/3,t*this.CELL_SIZE+2*this.CELL_SIZE/2.5)):(n.font="bold 20px serif",n.fillText(`${M[t][e].bombCount}`,e*this.CELL_SIZE+this.CELL_SIZE/3,t*this.CELL_SIZE+2*this.CELL_SIZE/3))}}var f=n.p+"assets/bulb.png";const g=new Image;function y(e,t){const n=Math.floor(e/this.CELL_SIZE),o=Math.floor(t/this.CELL_SIZE),l=document.querySelector("canvas").getContext("2d");if(!M[o][n].isOpen)if(M[o][n].hasFlag){M[o][n].hasFlag=!1,l.clearRect(n*this.CELL_SIZE,o*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE);const e=(o+n)%2==0?B:R;l.fillStyle=e,l.fillRect(n*this.CELL_SIZE,o*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE)}else M[o][n].hasFlag=!0,l.drawImage(g,n*this.CELL_SIZE,o*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE)}g.src=f;var I=n.p+"af7f431108529e51e10e8a7422db4d98.mp3";let v=1;const O=[],_=new Audio(I);var Z=n.p+"f5f70d3f87ce55258f783f13add9a330.mp3",N=n.p+"e3f4933045c6fb6422d52dc2777a6fb2.mp3",w=n.p+"assets/images.jpg";!function(){const e=document.createElement("header");e.className="header",e.textContent="stranger game";const t=document.createElement("main");t.className="wrapper";const n=document.createElement("div");n.className="game-info";const o=document.createElement("select");o.className="select",o.setAttribute("name","select level"),u.className="canvas",document.body.appendChild(e),document.body.appendChild(t),t.appendChild(n),n.appendChild(o),["easy","medium","hard"].forEach((e=>{const t=document.createElement("option");t.className="level-option",t.setAttribute("value",e),t.innerText=e,o.appendChild(t)}));const l=document.createElement("select");l.className="mines-input",l.setAttribute("name","custom mines"),n.appendChild(l);for(let e=10;e<100;e++){const t=document.createElement("option");t.className="mines-num",t.setAttribute("value",e),t.innerText=e,l.appendChild(t)}const a=document.createElement("button");a.className="button new-game-button",a.innerText="NEW GAME",n.appendChild(a);const s=document.createElement("p");s.className="clicks-field",s.innerHTML="number of clicks ",n.appendChild(s);const c=document.createElement("span");c.className="clicks-num",c.innerHTML="0",s.appendChild(c);const r=document.createElement("div");r.className="timer",n.appendChild(r);const m=["00",":","00"];if(localStorage.getItem("Time")){let e=JSON.parse(localStorage.getItem("Time")),t=0;for(let n of e)m[t]=n,t++;i(m[0],m[2])}m.forEach(((e,t)=>{const n=document.createElement("span");n.className="time",0===t?n.classList.add("minutes"):2===t&&n.classList.add("seconds"),n.innerHTML=e,r.appendChild(n)}));const d=document.createElement("button");d.className="button results-button",d.innerHTML="results",n.appendChild(d),t.appendChild(u);const p=document.createElement("footer");p.className="footer",document.body.appendChild(p);const h=document.createElement("button");h.className="sound-btn",p.appendChild(h);const C=document.createElement("input");C.className="color-mode-input",C.type="checkbox",C.id="switch-color",p.appendChild(C);const b=document.createElement("label");b.className="color-mode",b.setAttribute("for","switch-color"),p.appendChild(b)}();const x=document.querySelector("canvas").getContext("2d");let q,M=[],T=[],k={CELL_SIZE:35,ROWS:10,COLS:10,BOMB_COUNT:10},B="#E52A29",R="#040825";const W=new Image;function A(){q=0,U=!0,r(),document.querySelector(".clicks-num").innerHTML=q,u.width=this.CELL_SIZE*this.COLS,u.height=this.CELL_SIZE*this.ROWS,M.splice(0,M.length),T.splice(0,T.length);for(let e=0;e<this.ROWS;e++){M.push([]);for(let t=0;t<this.COLS;t++){M[e].push({isOpen:!1,hasBomb:!1,hasFlag:!1,bombCount:0}),this.CELL_SIZE,this.CELL_SIZE;const n=(e+t)%2==0?B:R;x.fillStyle=n,x.fillRect(t*this.CELL_SIZE,e*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE)}}}function F(e,t){const n=Math.floor(e/this.CELL_SIZE),o=Math.floor(t/this.CELL_SIZE);if(T.length>0){if(M[o][n].hasFlag)return;J.call(k,n,o)}else{for(H.call(k);M[o][n].hasBomb;)if(T=[],H.call(k),!M[o][n].hasBomb)return void J.call(k,n,o);J.call(k,n,o)}}function H(){for(let e=0;e<this.ROWS;e++)for(let t=0;t<this.COLS;t++)M[e][t].isOpen=!1,M[e][t].hasBomb=!1,M[e][t].hasFlag=!1,M[e][t].bombCount=0;for(;T.length<this.BOMB_COUNT;){const e=Math.floor(Math.random()*this.ROWS),t=Math.floor(Math.random()*this.COLS);M[e][t].hasBomb||(T.push({row:e,col:t}),M[e][t].hasBomb=!0)}for(let e=0;e<this.ROWS;e++)for(let t=0;t<this.COLS;t++)M[e][t].hasBomb&&(0===e?0===t?(M[e][t+1].bombCount+=1,M[e+1][t].bombCount+=1,M[e+1][t+1].bombCount+=1):t<this.COLS-1?(M[e][t-1].bombCount+=1,M[e][t+1].bombCount+=1,M[e+1][t-1].bombCount+=1,M[e+1][t].bombCount+=1,M[e+1][t+1].bombCount+=1):t===this.COLS-1&&(M[e][t-1].bombCount+=1,M[e+1][t-1].bombCount+=1,M[e+1][t].bombCount+=1):e===this.ROWS-1?0===t?(M[e][t+1].bombCount+=1,M[e-1][t].bombCount+=1,M[e-1][t+1].bombCount+=1):t<this.COLS-1?(M[e][t-1].bombCount+=1,M[e][t+1].bombCount+=1,M[e-1][t-1].bombCount+=1,M[e-1][t].bombCount+=1,M[e-1][t+1].bombCount+=1):t===this.COLS-1&&(M[e][t-1].bombCount+=1,M[e-1][t-1].bombCount+=1,M[e-1][t].bombCount+=1):0===t?(M[e-1][t].bombCount+=1,M[e-1][t+1].bombCount+=1,M[e][t+1].bombCount+=1,M[e+1][t].bombCount+=1,M[e+1][t+1].bombCount+=1):t===this.COLS-1?(M[e-1][t-1].bombCount+=1,M[e-1][t].bombCount+=1,M[e][t-1].bombCount+=1,M[e+1][t-1].bombCount+=1,M[e+1][t].bombCount+=1):(M[e-1][t-1].bombCount+=1,M[e-1][t].bombCount+=1,M[e-1][t+1].bombCount+=1,M[e][t-1].bombCount+=1,M[e][t+1].bombCount+=1,M[e+1][t-1].bombCount+=1,M[e+1][t].bombCount+=1,M[e+1][t+1].bombCount+=1))}W.src=w,u.addEventListener("click",(e=>{const t=e.offsetX,n=e.offsetY;F.call(k,t,n)})),u.addEventListener("contextmenu",(e=>{const t=e.offsetX,n=e.offsetY;e.preventDefault(),y.call(k,t,n)}));let $,U=!0;function J(e,t){U&&i();const n=M[t][e];n.hasBomb&&(x.drawImage(W,e*this.CELL_SIZE,t*this.CELL_SIZE,this.CELL_SIZE,this.CELL_SIZE),r(),G.play(),m.classList.add("popup-background"),document.body.appendChild(m),m.style.opacity=1,setTimeout((()=>{d.className="popup popup-active",m.appendChild(d),h.className="popup-text popup-active",h.innerHTML="Game over. Try again",d.appendChild(h),p.className="restart-btn button",p.innerHTML="restart game",d.appendChild(p)}),1e3)),n.isOpen||n.hasBomb||(q++,document.querySelector(".clicks-num").textContent="",document.querySelector(".clicks-num").textContent=q,j.play()),S.call(k,e,t),$=0;for(let e=0;e<this.ROWS;e++)for(let t=0;t<this.COLS;t++)M[e][t].isOpen&&($+=1);$===this.COLS*this.ROWS-this.BOMB_COUNT&&function(){m.className="popup-background",document.body.appendChild(m),m.style.opacity=1,d.className="popup popup-active",m.appendChild(d);let e=document.querySelector(".minutes").textContent,t=document.querySelector(".seconds").textContent;h.className="popup-text popup-active",h.innerHTML=`Congratulations! You've found all upside down portals in ${e>0?e+" minutes":""} ${t>0?t+" seconds":""}  and ${q} moves!`,d.appendChild(h),p.className="restart-btn button",p.innerHTML="restart game",d.appendChild(p),_.play(),O.push(v),O.push(e),O.push(t),O.push(q);let n=JSON.stringify(O);localStorage.setItem(`game ${v}`,n),v>=10?v=1:v++,O.splice(0,O.length)}(),U=!1}p.addEventListener("click",(e=>{U=!0,A.call(k),r(),d.remove(),h.remove(),m.remove(),G.pause(),_.pause()})),document.querySelector(".new-game-button").addEventListener("click",(e=>{U=!0,A.call(k),r()})),document.querySelector(".select").addEventListener("input",(e=>{switch(e.target.value){case"easy":k.CELL_SIZE=35,k.ROWS=10,k.COLS=10,k.BOMB_COUNT=10,document.querySelector(".mines-input").value=10,A.call(k);break;case"medium":k.CELL_SIZE=30,k.ROWS=15,k.COLS=15,k.BOMB_COUNT=30,document.querySelector(".mines-input").value=30,A.call(k);break;case"hard":window.innerWidth<640?k.CELL_SIZE=15:k.CELL_SIZE=25,k.ROWS=25,k.COLS=25,k.BOMB_COUNT=80,document.querySelector(".mines-input").value=80,A.call(k)}})),document.querySelector(".mines-input").addEventListener("input",(e=>{k.BOMB_COUNT=e.target.value}));const j=new Audio(N),G=new Audio(Z);document.querySelector(".results-button").addEventListener("click",(e=>{const t=[];for(let e=1;e<=10;e++)if(localStorage.getItem(`game ${e}`)){let n=JSON.parse(localStorage.getItem(`game ${e}`));t.push(n)}m.className="popup-background",document.body.appendChild(m),m.style.opacity=1;const n=document.createElement("table");n.className="results-table",m.appendChild(n);const o=document.createElement("thead");n.appendChild(o);const l=document.createElement("tr");o.appendChild(l);const a=document.createElement("tr");o.appendChild(a);const s=document.createElement("th");s.setAttribute("colspan",3),s.textContent="WINNED GAMES",l.appendChild(s);const c=document.createElement("th");c.textContent="GAME #",a.appendChild(c);const i=document.createElement("th");i.textContent="TIME",a.appendChild(i);const r=document.createElement("th");r.textContent="CLICKS",a.appendChild(r);const u=document.createElement("tbody");u.className="results-table-body",n.appendChild(u),t.forEach(((e,t)=>{const n=document.createElement("tr");u.appendChild(n),e.forEach(((e,o)=>{const l=document.createElement("td");0===o?(n.appendChild(l),l.textContent=e):1===o||2===o?1===o?(l.className="results-table-time",n.appendChild(l),l.textContent=e+" : "):2===o&&(document.querySelectorAll(".results-table-time")[t].textContent+=e):(n.appendChild(l),l.textContent=e)}))})),document.querySelector(".popup-background").addEventListener("click",(e=>{if(!m.hasChildNodes||m.firstChild.lastChild!==p){for(;m.firstChild;)m.removeChild(m.firstChild);m.remove()}}))})),window.addEventListener("beforeunload",(function(){let e=JSON.stringify(M);localStorage.setItem("game state",e);let t=JSON.stringify(k);localStorage.setItem("Canvas params",t);let n=document.querySelector(".select").value;localStorage.setItem("game level",n);let o=document.querySelector(".mines-input").value;localStorage.setItem("mines number",o);let l=document.querySelector(".minutes").innerHTML,a=document.querySelector(".seconds").innerHTML,s=JSON.stringify([l,":",a]);localStorage.setItem("Time",s),localStorage.setItem("number of clicks",q)})),window.addEventListener("load",function(){if(localStorage.getItem("game state")&&"[]"!==localStorage.getItem("game state")){U=!1,M=JSON.parse(localStorage.getItem("game state")),k=JSON.parse(localStorage.getItem("Canvas params")),q=localStorage.getItem("number of clicks"),document.querySelector(".clicks-num").textContent=q,document.querySelector(".select").value=localStorage.getItem("game level"),document.querySelector(".mines-input").value=localStorage.getItem("mines number"),u.width=k.CELL_SIZE*k.COLS,u.height=k.CELL_SIZE*k.ROWS;for(let e=0;e<k.ROWS;e++)for(let t=0;t<k.COLS;t++){if(M[e][t].hasBomb&&T.push({i:e,j:t}),!M[e][t].isOpen){const n=(e+t)%2==0?B:R;x.fillStyle=n,x.fillRect(t*k.CELL_SIZE,e*k.CELL_SIZE,k.CELL_SIZE,k.CELL_SIZE)}if(M[e][t].hasFlag){const n=new Image;n.src=f,n.onload=function(){x.drawImage(n,t*k.CELL_SIZE,e*k.CELL_SIZE,k.CELL_SIZE,k.CELL_SIZE)}}M[e][t].isOpen&&L.call(k,t,e)}}else A.call(k)}.call(k));const P=()=>{window.innerWidth<640?"hard"===document.querySelector(".select").value&&(k.CELL_SIZE=15,A.call(k)):window.innerWidth>=640&&"hard"===document.querySelector(".select").value&&(k.CELL_SIZE=25)};window.addEventListener("resize",P),window.addEventListener("load",P);const D=document.querySelector(".sound-btn");D.addEventListener("click",(e=>{0!==j.volume?(j.volume=0,G.volume=0,_.volume=0):(j.volume=1,G.volume=1,_.volume=1),D.classList.toggle("mute")}));const X=document.querySelector(".color-mode-input");X.addEventListener("change",(e=>{X.checked?(R="#3a5fe5",document.body.classList.add("body-blue"),document.querySelector(".header").classList.add("header-blue"),document.querySelector(".game-info").classList.add("blue"),A.call(k)):(R="#040825",document.body.classList.remove("body-blue"),document.querySelector(".header").classList.remove("header-blue"),document.querySelector(".game-info").classList.remove("blue"),A.call(k))}))}()}();